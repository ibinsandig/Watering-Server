<!DOCTYPE html>
<html>
<head>
    <title>MQTT Data</title>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>-->
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
</head>
<body>
    <h1>MQTT Messages</h1>
    <div id="messages"></div>

    <script>
        var socket = io();
        var messagesDiv = document.getElementById('messages');
        console.log("Connecting to socket...");
        socket.on('mqtt_message', function(data) {
            console.log("Received message:", data);
            var message = document.createElement('p');
            message.textContent = `Topic: ${data.topic}, Message: ${data.payload}`;
            messagesDiv.appendChild(message);
        });
    </script>
</body>
</html>